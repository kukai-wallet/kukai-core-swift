<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KukaiCoreSwift - MediaProxyService</title>
    <link rel="stylesheet" type="text/css" href="https://kukai-core-swift.kukai.app/all.css" media="all" />
</head>
<body>
    <header>
        <a href="https://kukai-core-swift.kukai.app/">
            <strong>
                KukaiCoreSwift
            </strong>
            <span>Documentation</span>
        </a>
    </header>

    <!--
    <form class="search">
        <input type="search" placeholder="Search" />
    </form>
    -->

    <nav>
        <div class="wrapper">
            <h2>On This Page</h2>
            <ol><li><a href="#relationships">Relationships</a><ul><li><a href="#relationships">Nested Types</a></li><li><a href="#relationships">Conforms To</a></li></ul></li><li><a href="#methods">Methods</a><ul><li class="function"><a href="#mediaproxyservice.url(fromuristring:offormat:keepgif:)">url(from​Uri​String:​of​Format:​keep​Gif:​)</a></li><li class="function"><a href="#mediaproxyservice.url(fromuri:offormat:keepgif:)">url(from​Uri:​of​Format:​keep​Gif:​)</a></li><li class="function"><a href="#mediaproxyservice.thumbnailurl(fornft:keepgif:)">thumbnail​URL(for​NFT:​keep​Gif:​)</a></li><li class="function"><a href="#mediaproxyservice.displayurl(fornft:keepgif:)">display​URL(for​NFT:​keep​Gif:​)</a></li><li class="function"><a href="#mediaproxyservice.getmediatype(fromformats:)">get​Media​Type(from​Formats:​)</a></li><li class="function"><a href="#mediaproxyservice.getmediatype(fromformats:orurl:urlsession:completion:)">get​Media​Type(from​Formats:​or​URL:​url​Session:​completion:​)</a></li><li class="function"><a href="#mediaproxyservice.typescontents(_:)">types​Contents(_:​)</a></li><li class="function"><a href="#mediaproxyservice.removeallimages(completion:)">remove​All​Images(completion:​)</a></li><li class="function"><a href="#mediaproxyservice.removeallimages(fromcache:completion:)">remove​All​Images(from​Cache:​completion:​)</a></li><li class="function"><a href="#mediaproxyservice.clearexpiredimages()">clear​Expired​Images()</a></li><li class="function"><a href="#mediaproxyservice.sizeof(cache:)">size​Of(cache:​)</a></li><li class="function"><a href="#mediaproxyservice.load(url:to:withcachetype:fallback:downsamplesize:completion:)">load(url:​to:​with​Cache​Type:​fallback:​down​Sample​Size:​completion:​)</a></li><li class="function"><a href="#mediaproxyservice.imagecache(fortype:)">image​Cache(for​Type:​)</a></li><li class="function"><a href="#mediaproxyservice.cacheimage(url:cachetype:completion:)">cache​Image(url:​cache​Type:​completion:​)</a></li><li class="function"><a href="#mediaproxyservice.iscached(url:cachetype:)">is​Cached(url:​cache​Type:​)</a></li><li class="function"><a href="#mediaproxyservice.sizeforimageifcached(url:cachetype:completion:)">size​For​Image​IfCached(url:​cache​Type:​completion:​)</a></li><li class="function"><a href="#mediaproxyservice.urlsession(_:downloadtask:didfinishdownloadingto:)">url​Session(_:​download​Task:​did​Finish​Downloading​To:​)</a></li><li class="function"><a href="#mediaproxyservice.urlsession(_:task:didcompletewitherror:)">url​Session(_:​task:​did​Complete​With​Error:​)</a></li><li class="function"><a href="#mediaproxyservice.urlsession(_:downloadtask:didwritedata:totalbyteswritten:totalbytesexpectedtowrite:)">url​Session(_:​download​Task:​did​Write​Data:​total​Bytes​Written:​total​Bytes​Expected​ToWrite:​)</a></li></ul></li></ol>
        </div>
    </nav>

    <main>
        <article>
            <h1>
    <small>Class</small>
    <code class="name">Media​Proxy​Service</code>
</h1>

<div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">class</span> <span class="type">MediaProxyService</span>: <span class="type">NSObject</span>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>A service class for interacting with the TC infrastructure to proxy NFT images, videos and audio files</p>

</div>
<section id="relationships">
    <h2 hidden>Relationships</h2>
        <figure>
    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: %775 Pages: 1 -->
<svg width="873pt" height="116pt"
 viewBox="0.00 0.00 872.92 116.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 112)">
<title>%775</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-112 868.9172,-112 868.9172,4 -4,4"/>
<!-- MediaProxyService -->
<g id="node1" class="node class current">
<title>MediaProxyService</title>
<g id="a_node1"><a xlink:href="https://kukai-core-swift.kukai.app/MediaProxyService" xlink:title="MediaProxyService">
<path fill="none" stroke="#000000" stroke-width="3" d="M537.3376,-108C537.3376,-108 345.3376,-108 345.3376,-108 339.3376,-108 333.3376,-102 333.3376,-96 333.3376,-96 333.3376,-84 333.3376,-84 333.3376,-78 339.3376,-72 345.3376,-72 345.3376,-72 537.3376,-72 537.3376,-72 543.3376,-72 549.3376,-78 549.3376,-84 549.3376,-84 549.3376,-96 549.3376,-96 549.3376,-102 543.3376,-108 537.3376,-108"/>
<text text-anchor="middle" x="441.3376" y="-86.3" font-family="Menlo" font-size="14.00" fill="#000000">MediaProxyService</text>
</a>
</g>
</g>
<!-- URLSessionDownloadDelegate -->
<g id="node2" class="node unknown">
<title>URLSessionDownloadDelegate</title>
<path fill="none" stroke="#000000" d="M323.8376,-36C323.8376,-36 110.8376,-36 110.8376,-36 104.8376,-36 98.8376,-30 98.8376,-24 98.8376,-24 98.8376,-12 98.8376,-12 98.8376,-6 104.8376,0 110.8376,0 110.8376,0 323.8376,0 323.8376,0 329.8376,0 335.8376,-6 335.8376,-12 335.8376,-12 335.8376,-24 335.8376,-24 335.8376,-30 329.8376,-36 323.8376,-36"/>
<text text-anchor="middle" x="217.3376" y="-14.3" font-family="Menlo" font-size="14.00" fill="#000000">URLSessionDownloadDelegate</text>
</g>
<!-- MediaProxyService&#45;&gt;URLSessionDownloadDelegate -->
<g id="edge2" class="edge conformsTo">
<title>MediaProxyService&#45;&gt;URLSessionDownloadDelegate</title>
<path fill="none" stroke="#000000" d="M385.1021,-71.9243C354.2137,-61.9959 315.728,-49.6255 283.412,-39.2382"/>
<polygon fill="#000000" stroke="#000000" points="284.1876,-35.8112 273.5962,-36.0831 282.0455,-42.4754 284.1876,-35.8112"/>
</g>
<!-- NSObject -->
<g id="node3" class="node unknown">
<title>NSObject</title>
<path fill="none" stroke="#000000" d="M762.3376,-36C762.3376,-36 570.3376,-36 570.3376,-36 564.3376,-36 558.3376,-30 558.3376,-24 558.3376,-24 558.3376,-12 558.3376,-12 558.3376,-6 564.3376,0 570.3376,0 570.3376,0 762.3376,0 762.3376,0 768.3376,0 774.3376,-6 774.3376,-12 774.3376,-12 774.3376,-24 774.3376,-24 774.3376,-30 768.3376,-36 762.3376,-36"/>
<text text-anchor="middle" x="666.3376" y="-14.3" font-family="Menlo" font-size="14.00" fill="#000000">NSObject</text>
</g>
<!-- MediaProxyService&#45;&gt;NSObject -->
<g id="edge1" class="edge conformsTo">
<title>MediaProxyService&#45;&gt;NSObject</title>
<path fill="none" stroke="#000000" d="M497.8242,-71.9243C528.8504,-61.9959 567.5079,-49.6255 599.9682,-39.2382"/>
<polygon fill="#000000" stroke="#000000" points="601.3703,-42.4645 609.8278,-36.0831 599.2368,-35.7975 601.3703,-42.4645"/>
</g>
</g>
</svg>


    <figcaption hidden>Inheritance graph for MediaProxyService.</figcaption>
</figure>
        <h3>Nested Types</h3>
<dl>
    <dt class="enumeration"><code><a href="https://kukai-core-swift.kukai.app/MediaProxyService_Format">MediaProxyService.Format</a></code></dt>
<dd><p>Enum denoting the avaialble sizes for media</p>
</dd>
<dt class="enumeration"><code><a href="https://kukai-core-swift.kukai.app/MediaProxyService_Source">MediaProxyService.Source</a></code></dt>
<dd><p>Supported source types for proxied media</p>
</dd>
<dt class="enumeration"><code><a href="https://kukai-core-swift.kukai.app/MediaProxyService_MediaType">MediaProxyService.MediaType</a></code></dt>
<dd><p>Supported media types</p>
</dd>
<dt class="enumeration"><code><a href="https://kukai-core-swift.kukai.app/MediaProxyService_AggregatedMediaType">MediaProxyService.AggregatedMediaType</a></code></dt>
<dd><p>Helper to parse a collection of media types to understand its contents</p>
</dd>
</dl>
<h3>Conforms To</h3>
<dl>
    <dt class="unknown"><code>NSObject</code></dt>
<dt class="unknown"><code>URLSessionDownloadDelegate</code></dt>
</dl>
</section>
    <section id="methods">
        <h2>Methods</h2>

        <div role="article" class="function" id="mediaproxyservice.url(fromuristring:offormat:keepgif:)">
    <h3>
        <code><a href="#mediaproxyservice.url(fromuristring:offormat:keepgif:)">url(from​Uri​String:​of​Format:​keep​Gif:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">url</span>(<span class="variable">fromUriString</span> <span class="variable">uri</span>: <span class="type">String</span>?, <span class="variable">ofFormat</span> <span class="variable">format</span>: <span class="type">Format</span>, <span class="variable">keepGif</span>: <span class="type">Bool</span> = <span class="keyword">false</span>) -&gt; <span class="type">URL</span>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Take a URI from a token metadata response and convert it to a useable media proxy URL</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>from​Uri​String</th>
    <td><code class="type">String?</code></td>
    <td><p>String containing a URI (supports IPFS URIs)</p>
</td>
</tr>
<tr>
    <th>of​Format</th>
    <td><code class="type">Format</code></td>
    <td><p>The requested format from the proxy</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>An optional URL</p>

</div>
<div role="article" class="function" id="mediaproxyservice.url(fromuri:offormat:keepgif:)">
    <h3>
        <code><a href="#mediaproxyservice.url(fromuri:offormat:keepgif:)">url(from​Uri:​of​Format:​keep​Gif:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">url</span>(<span class="variable">fromUri</span> <span class="variable">uri</span>: <span class="type">URL</span>?, <span class="variable">ofFormat</span> <span class="variable">format</span>: <span class="type">Format</span>, <span class="variable">keepGif</span>: <span class="type">Bool</span> = <span class="keyword">false</span>) -&gt; <span class="type">URL</span>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Take a URI from a token metadata response and convert it to a useable media proxy URL</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>from​Uri</th>
    <td><code class="type">URL?</code></td>
    <td><p>URL object containing a URI (supports IPFS URIs)</p>
</td>
</tr>
<tr>
    <th>of​Format</th>
    <td><code class="type">Format</code></td>
    <td><p>The requested format from the proxy</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>An optional URL</p>

</div>
<div role="article" class="function" id="mediaproxyservice.thumbnailurl(fornft:keepgif:)">
    <h3>
        <code><a href="#mediaproxyservice.thumbnailurl(fornft:keepgif:)">thumbnail​URL(for​NFT:​keep​Gif:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">thumbnailURL</span>(<span class="variable">forNFT</span> <span class="variable">nft</span>: <a href="https://kukai-core-swift.kukai.app/NFT"><span class="type">NFT</span></a>, <span class="variable">keepGif</span>: <span class="type">Bool</span> = <span class="keyword">false</span>) -&gt; <span class="type">URL</span>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Helper method to return a standard thumbnail URL for a NFT, taking into account some custom logic / known workarounds</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>from​NFT</th>
    <td></td>
    <td><p><code>NFT</code> object</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>An optional URL</p>

</div>
<div role="article" class="function" id="mediaproxyservice.displayurl(fornft:keepgif:)">
    <h3>
        <code><a href="#mediaproxyservice.displayurl(fornft:keepgif:)">display​URL(for​NFT:​keep​Gif:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">displayURL</span>(<span class="variable">forNFT</span> <span class="variable">nft</span>: <a href="https://kukai-core-swift.kukai.app/NFT"><span class="type">NFT</span></a>, <span class="variable">keepGif</span>: <span class="type">Bool</span> = <span class="keyword">false</span>) -&gt; <span class="type">URL</span>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Helper method to return a standard larger display URL for a NFT</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>from​NFT</th>
    <td></td>
    <td><p><code>NFT</code> object</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>An optional URL</p>

</div>
<div role="article" class="function" id="mediaproxyservice.getmediatype(fromformats:)">
    <h3>
        <code><a href="#mediaproxyservice.getmediatype(fromformats:)">get​Media​Type(from​Formats:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">getMediaType</span>(<span class="variable">fromFormats</span> <span class="variable">formats</span>: [<a href="https://kukai-core-swift.kukai.app/TzKTBalanceMetadataFormat"><span class="type">TzKTBalanceMetadataFormat</span></a>]) -&gt; [<span class="type">MediaType</span>]  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Using only info from <code>TzKTBalanceMetadataFormat</code> determine the media type(s) of the object</p>

</div>
</div>
<div role="article" class="function" id="mediaproxyservice.getmediatype(fromformats:orurl:urlsession:completion:)">
    <h3>
        <code><a href="#mediaproxyservice.getmediatype(fromformats:orurl:urlsession:completion:)">get​Media​Type(from​Formats:​or​URL:​url​Session:​completion:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">getMediaType</span>(<span class="variable">fromFormats</span> <span class="variable">formats</span>: [<a href="https://kukai-core-swift.kukai.app/TzKTBalanceMetadataFormat"><span class="type">TzKTBalanceMetadataFormat</span></a>], <span class="variable">orURL</span> <span class="variable">url</span>: <span class="type">URL</span>?, <span class="variable">urlSession</span>: <span class="type">URLSession</span> = .<span class="variable">shared</span>, <span class="variable">completion</span>: <span class="attribute">@</span><span class="attribute">escaping</span> ((<span class="type">Result</span>&lt;[<span class="type">MediaType</span>], <a href="https://kukai-core-swift.kukai.app/KukaiError"><span class="type">KukaiError</span></a>&gt;) -&gt; <span class="type">Void</span>))  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Given multiple sources of information, attempt to find the media type the url is pointing too</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>from​Formats</th>
    <td><code class="type">[TzKTBalance​Metadata​Format]</code></td>
    <td><p>An array of <code>TzKTBalanceMetadataFormat</code> that comes down with the TzKTClient's balancing fetching code. It MAY contain infomration on the media type</p>
</td>
</tr>
<tr>
    <th>or​URL</th>
    <td><code class="type">URL?</code></td>
    <td><p>The URL for the record. It MAY contain a file extension dennoting the file type</p>
</td>
</tr>
<tr>
    <th>url​Session</th>
    <td><code class="type">URLSession</code></td>
    <td><p>If type can't be found via URL or metadata, download the first packet, examine the headers for <code>Content-Type</code> using this session. (HEAD requests aren't currently supported if the asset hasn't been already cached)</p>
</td>
</tr>
<tr>
    <th>completion</th>
    <td><code class="type">@escaping ((Result&lt;[Media​Type], Kukai​Error&gt;) -&gt; Void)</code></td>
    <td><p>A block to run when a type can be found, or an error encountered</p>
</td>
</tr>
  </tbody>
</table>
</div>
<div role="article" class="function" id="mediaproxyservice.typescontents(_:)">
    <h3>
        <code><a href="#mediaproxyservice.typescontents(_:)">types​Contents(_:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">typesContents</span>(<span class="keyword">_</span> <span class="variable">types</span>: [<span class="type">MediaType</span>]) -&gt; <span class="type">AggregatedMediaType</span>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Helper method to parse an array of <code>MediaType</code> to quickly determine its content type so UI can be easily arraged</p>

</div>
</div>
<div role="article" class="function" id="mediaproxyservice.removeallimages(completion:)">
    <h3>
        <code><a href="#mediaproxyservice.removeallimages(completion:)">remove​All​Images(completion:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">removeAllImages</span>(<span class="variable">completion</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (() -&gt; <span class="type">Void</span>))  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Clear all images from all caches</p>

</div>
</div>
<div role="article" class="function" id="mediaproxyservice.removeallimages(fromcache:completion:)">
    <h3>
        <code><a href="#mediaproxyservice.removeallimages(fromcache:completion:)">remove​All​Images(from​Cache:​completion:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">removeAllImages</span>(<span class="variable">fromCache</span>: <a href="https://kukai-core-swift.kukai.app/CacheType"><span class="type">CacheType</span></a>, <span class="variable">completion</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (() -&gt; <span class="type">Void</span>))  </body></html></code></pre>
</div>
</div>
<div role="article" class="function" id="mediaproxyservice.clearexpiredimages()">
    <h3>
        <code><a href="#mediaproxyservice.clearexpiredimages()">clear​Expired​Images()</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">clearExpiredImages</span>()  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Clear only iamges from cahce that have expired</p>

</div>
</div>
<div role="article" class="function" id="mediaproxyservice.sizeof(cache:)">
    <h3>
        <code><a href="#mediaproxyservice.sizeof(cache:)">size​Of(cache:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">sizeOf</span>(<span class="variable">cache</span>: <a href="https://kukai-core-swift.kukai.app/CacheType"><span class="type">CacheType</span></a>) -&gt; <span class="type">UInt</span>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Get size in bytes</p>

</div>
</div>
<div role="article" class="function" id="mediaproxyservice.load(url:to:withcachetype:fallback:downsamplesize:completion:)">
    <h3>
        <code><a href="#mediaproxyservice.load(url:to:withcachetype:fallback:downsamplesize:completion:)">load(url:​to:​with​Cache​Type:​fallback:​down​Sample​Size:​completion:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">load</span>(<span class="variable">url</span>: <span class="type">URL</span>?, <span class="variable">to</span> <span class="variable">imageView</span>: <span class="type">UIImageView</span>, <span class="variable">withCacheType</span> <span class="variable">cacheType</span>: <a href="https://kukai-core-swift.kukai.app/CacheType"><span class="type">CacheType</span></a>, <span class="variable">fallback</span>: <span class="type">UIImage</span>, <span class="variable">downSampleSize</span>: <span class="type">CGSize</span>? = <span class="keyword">nil</span>, <span class="variable">completion</span>: ((<span class="type">CGSize</span>?) -&gt; <span class="type">Void</span>)? = <span class="keyword">nil</span>)  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Attempt to use KingFisher library to load an image from a URL, into an UIImageView, with support for downsampling, displaying loading spinner, svgs, gifs and the permanent / temporary caching system</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>url</th>
    <td><code class="type">URL?</code></td>
    <td><p>Media proxy URL pointing to an image</p>
</td>
</tr>
<tr>
    <th>to</th>
    <td><code class="type">UIImage​View</code></td>
    <td><p>The <code>UIImageView</code> to load the image into</p>
</td>
</tr>
<tr>
    <th>from​Cache</th>
    <td></td>
    <td><p>Which cahce to search for the image, or load it into if not found and needs to be downloaded</p>
</td>
</tr>
<tr>
    <th>fallback</th>
    <td><code class="type">UIImage</code></td>
    <td><p>If an error occurs and an image can't be downloaded/loaded in, display this image instead</p>
</td>
</tr>
<tr>
    <th>down​Sample​Size</th>
    <td><code class="type">CGSize?</code></td>
    <td><p>Supply the dimensions you wish the image to be resized to fit</p>
</td>
</tr>
<tr>
    <th>completion</th>
    <td><code class="type">((CGSize?) -&gt; Void)?</code></td>
    <td><p>returns when operation finished, if successful it will return the downloaded image's CGSize</p>
</td>
</tr>
  </tbody>
</table>
</div>
<div role="article" class="function" id="mediaproxyservice.imagecache(fortype:)">
    <h3>
        <code><a href="#mediaproxyservice.imagecache(fortype:)">image​Cache(for​Type:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">imageCache</span>(<span class="variable">forType</span>: <a href="https://kukai-core-swift.kukai.app/CacheType"><span class="type">CacheType</span></a>) -&gt; <span class="type">ImageCache</span>  </body></html></code></pre>
</div>
</div>
<div role="article" class="function" id="mediaproxyservice.cacheimage(url:cachetype:completion:)">
    <h3>
        <code><a href="#mediaproxyservice.cacheimage(url:cachetype:completion:)">cache​Image(url:​cache​Type:​completion:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">cacheImage</span>(<span class="variable">url</span>: <span class="type">URL</span>?, <span class="variable">cacheType</span>: <a href="https://kukai-core-swift.kukai.app/CacheType"><span class="type">CacheType</span></a> = .<span class="variable">temporary</span>, <span class="variable">completion</span>: <span class="attribute">@</span><span class="attribute">escaping</span> ((<span class="type">CGSize</span>?) -&gt; <span class="type">Void</span>))  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Attempt to use KingFisher library to load an image from a URL, and store it directly in the cache for later usage. Also optional return the downloaded size via a completion block, useful for preparing table/collection view</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>url</th>
    <td><code class="type">URL?</code></td>
    <td><p>Media proxy URL pointing to an image</p>
</td>
</tr>
<tr>
    <th>from​Cache</th>
    <td></td>
    <td><p>Which cahce to search for the image, or load it into if not found and needs to be downloaded</p>
</td>
</tr>
<tr>
    <th>completion</th>
    <td><code class="type">@escaping ((CGSize?) -&gt; Void)</code></td>
    <td><p>returns when operation finished, if successful it will return the downloaded image's CGSize</p>
</td>
</tr>
  </tbody>
</table>
</div>
<div role="article" class="function" id="mediaproxyservice.iscached(url:cachetype:)">
    <h3>
        <code><a href="#mediaproxyservice.iscached(url:cachetype:)">is​Cached(url:​cache​Type:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">isCached</span>(<span class="variable">url</span>: <span class="type">URL</span>?, <span class="variable">cacheType</span>: <a href="https://kukai-core-swift.kukai.app/CacheType"><span class="type">CacheType</span></a> = .<span class="variable">temporary</span>) -&gt; <span class="type">Bool</span>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Check if a given url is already cached</p>

</div>
</div>
<div role="article" class="function" id="mediaproxyservice.sizeforimageifcached(url:cachetype:completion:)">
    <h3>
        <code><a href="#mediaproxyservice.sizeforimageifcached(url:cachetype:completion:)">size​For​Image​IfCached(url:​cache​Type:​completion:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">sizeForImageIfCached</span>(<span class="variable">url</span>: <span class="type">URL</span>?, <span class="variable">cacheType</span>: <a href="https://kukai-core-swift.kukai.app/CacheType"><span class="type">CacheType</span></a> = .<span class="variable">temporary</span>, <span class="variable">completion</span>: <span class="attribute">@</span><span class="attribute">escaping</span> ((<span class="type">CGSize</span>?) -&gt; <span class="type">Void</span>) )  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Check if an image is cached, and return its size if so. Useful for preparing table/collection view</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>url</th>
    <td><code class="type">URL?</code></td>
    <td><p>Media proxy URL pointing to an image</p>
</td>
</tr>
<tr>
    <th>from​Cache</th>
    <td></td>
    <td><p>Which cahce to search for the image, or load it into if not found and needs to be downloaded</p>
</td>
</tr>
<tr>
    <th>completion</th>
    <td><code class="type">@escaping ((CGSize?) -&gt; Void)</code></td>
    <td><p>returns when operation finished, if successful it will return the downloaded image's CGSize</p>
</td>
</tr>
  </tbody>
</table>
</div>
<div role="article" class="function" id="mediaproxyservice.urlsession(_:downloadtask:didfinishdownloadingto:)">
    <h3>
        <code><a href="#mediaproxyservice.urlsession(_:downloadtask:didfinishdownloadingto:)">url​Session(_:​download​Task:​did​Finish​Downloading​To:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">urlSession</span>(<span class="keyword">_</span> <span class="variable">session</span>: <span class="type">URLSession</span>, <span class="variable">downloadTask</span>: <span class="type">URLSessionDownloadTask</span>, <span class="variable">didFinishDownloadingTo</span> <span class="variable">location</span>: <span class="type">URL</span>)  </body></html></code></pre>
</div>
</div>
<div role="article" class="function" id="mediaproxyservice.urlsession(_:task:didcompletewitherror:)">
    <h3>
        <code><a href="#mediaproxyservice.urlsession(_:task:didcompletewitherror:)">url​Session(_:​task:​did​Complete​With​Error:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">urlSession</span>(<span class="keyword">_</span> <span class="variable">session</span>: <span class="type">URLSession</span>, <span class="variable">task</span>: <span class="type">URLSessionTask</span>, <span class="variable">didCompleteWithError</span> <span class="variable">error</span>: <span class="type">Error</span>?)  </body></html></code></pre>
</div>
</div>
<div role="article" class="function" id="mediaproxyservice.urlsession(_:downloadtask:didwritedata:totalbyteswritten:totalbytesexpectedtowrite:)">
    <h3>
        <code><a href="#mediaproxyservice.urlsession(_:downloadtask:didwritedata:totalbyteswritten:totalbytesexpectedtowrite:)">url​Session(_:​download​Task:​did​Write​Data:​total​Bytes​Written:​total​Bytes​Expected​ToWrite:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">urlSession</span>(<span class="keyword">_</span> <span class="variable">session</span>: <span class="type">URLSession</span>, <span class="variable">downloadTask</span>: <span class="type">URLSessionDownloadTask</span>, <span class="variable">didWriteData</span> <span class="variable">bytesWritten</span>: <span class="type">Int64</span>, <span class="variable">totalBytesWritten</span>: <span class="type">Int64</span>, <span class="variable">totalBytesExpectedToWrite</span>: <span class="type">Int64</span>)  </body></html></code></pre>
</div>
</div>
    </section>



        </article>
    </main>

    <footer>
        <p>
    Generated on <time datetime="2023-09-25T14:49:09+0000">September 25, 2023</time> using <a href="https://github.com/SwiftDocOrg/swift-doc">swift-doc</a> <span class="version">1.0.0-rc.1</span>.
</p>
    </footer>
</body>
</html>
