<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KukaiCoreSwift - DexCalculationService</title>
    <link rel="stylesheet" type="text/css" href="https://kukai-core-swift.kukai.app/all.css" media="all" />
</head>
<body>
    <header>
        <a href="https://kukai-core-swift.kukai.app/">
            <strong>
                KukaiCoreSwift
            </strong>
            <span>Documentation</span>
        </a>
    </header>

    <!--
    <form class="search">
        <input type="search" placeholder="Search" />
    </form>
    -->

    <nav>
        <div class="wrapper">
            <h2>On This Page</h2>
            <ol><li><a href="#properties">Properties</a><ul><li class="variable"><a href="#dexcalculationservice.shared">shared</a></li></ul></li><li><a href="#methods">Methods</a><ul><li class="function"><a href="#dexcalculationservice.calculatextztotoken(xtztosell:xtzpool:tokenpool:maxslippage:dex:)">calculate​Xtz​ToToken(xtz​ToSell:​xtz​Pool:​token​Pool:​max​Slippage:​dex:​)</a></li><li class="function"><a href="#dexcalculationservice.calculatetokentoxtz(tokentosell:xtzpool:tokenpool:maxslippage:dex:)">calculate​Token​ToXTZ(token​ToSell:​xtz​Pool:​token​Pool:​max​Slippage:​dex:​)</a></li><li class="function"><a href="#dexcalculationservice.calculateaddliquidity(xtz:xtzpool:tokenpool:totalliquidity:maxslippage:dex:)">calculate​Add​Liquidity(xtz:​xtz​Pool:​token​Pool:​total​Liquidity:​max​Slippage:​dex:​)</a></li><li class="function"><a href="#dexcalculationservice.calculateaddliquidity(token:xtzpool:tokenpool:totalliquidity:maxslippage:dex:)">calculate​Add​Liquidity(token:​xtz​Pool:​token​Pool:​total​Liquidity:​max​Slippage:​dex:​)</a></li><li class="function"><a href="#dexcalculationservice.calculateremoveliquidity(liquidityburned:totalliquidity:xtzpool:tokenpool:maxslippage:dex:)">calculate​Remove​Liquidity(liquidity​Burned:​total​Liquidity:​xtz​Pool:​token​Pool:​max​Slippage:​dex:​)</a></li><li class="function"><a href="#dexcalculationservice.settings(fordex:)">settings(for​Dex:​)</a></li><li class="function"><a href="#dexcalculationservice.xtztotokenexpectedreturn(xtztosell:xtzpool:tokenpool:dex:)">xtz​ToToken​Expected​Return(xtz​ToSell:​xtz​Pool:​token​Pool:​dex:​)</a></li><li class="function"><a href="#dexcalculationservice.xtztotokenminimumreturn(tokenamount:slippage:)">xtz​ToToken​Minimum​Return(token​Amount:​slippage:​)</a></li><li class="function"><a href="#dexcalculationservice.xtztotokenrequiredxtzfor(tokenamount:xtzpool:tokenpool:dex:)">xtz​ToToken​Required​Xtz​For(token​Amount:​xtz​Pool:​token​Pool:​dex:​)</a></li><li class="function"><a href="#dexcalculationservice.xtztotokenexchangerate(xtztosell:xtzpool:tokenpool:dex:)">xtz​ToToken​Exchange​Rate(xtz​ToSell:​xtz​Pool:​token​Pool:​dex:​)</a></li><li class="function"><a href="#dexcalculationservice.xtztotokenexchangeratedisplay(xtztosell:xtzpool:tokenpool:dex:)">xtz​ToToken​Exchange​Rate​Display(xtz​ToSell:​xtz​Pool:​token​Pool:​dex:​)</a></li><li class="function"><a href="#dexcalculationservice.xtztotokenmarketrate(xtzpool:tokenpool:)">xtz​ToToken​Market​Rate(xtz​Pool:​token​Pool:​)</a></li><li class="function"><a href="#dexcalculationservice.xtztotokenpriceimpact(xtztosell:xtzpool:tokenpool:dex:)">xtz​ToToken​Price​Impact(xtz​ToSell:​xtz​Pool:​token​Pool:​dex:​)</a></li><li class="function"><a href="#dexcalculationservice.tokentoxtzexpectedreturn(tokentosell:xtzpool:tokenpool:dex:)">token​ToXtz​Expected​Return(token​ToSell:​xtz​Pool:​token​Pool:​dex:​)</a></li><li class="function"><a href="#dexcalculationservice.tokentoxtzminimumreturn(xtzamount:slippage:)">token​ToXtz​Minimum​Return(xtz​Amount:​slippage:​)</a></li><li class="function"><a href="#dexcalculationservice.tokentoxtzrequiredtokenfor(xtzamount:xtzpool:tokenpool:dex:)">token​ToXtz​Required​Token​For(xtz​Amount:​xtz​Pool:​token​Pool:​dex:​)</a></li><li class="function"><a href="#dexcalculationservice.tokentoxtzexchangerate(tokentosell:xtzpool:tokenpool:dex:)">token​ToXtz​Exchange​Rate(token​ToSell:​xtz​Pool:​token​Pool:​dex:​)</a></li><li class="function"><a href="#dexcalculationservice.tokentoxtzexchangeratedisplay(tokentosell:xtzpool:tokenpool:dex:)">token​ToXtz​Exchange​Rate​Display(token​ToSell:​xtz​Pool:​token​Pool:​dex:​)</a></li><li class="function"><a href="#dexcalculationservice.tokentoxtzmarketrate(xtzpool:tokenpool:)">token​ToXtz​Market​Rate(xtz​Pool:​token​Pool:​)</a></li><li class="function"><a href="#dexcalculationservice.tokentoxtzpriceimpact(tokentosell:xtzpool:tokenpool:dex:)">token​ToXtz​Price​Impact(token​ToSell:​xtz​Pool:​token​Pool:​dex:​)</a></li><li class="function"><a href="#dexcalculationservice.addliquidityreturn(xtztodeposit:xtzpool:totalliquidity:slippage:dex:)">add​Liquidity​Return(xtz​ToDeposit:​xtz​Pool:​total​Liquidity:​slippage:​dex:​)</a></li><li class="function"><a href="#dexcalculationservice.addliquiditytokenrequired(xtztodeposit:xtzpool:tokenpool:dex:)">add​Liquidity​Token​Required(xtz​ToDeposit:​xtz​Pool:​token​Pool:​dex:​)</a></li><li class="function"><a href="#dexcalculationservice.addliquidityxtzrequired(tokentodeposit:xtzpool:tokenpool:dex:)">add​Liquidity​Xtz​Required(token​ToDeposit:​xtz​Pool:​token​Pool:​dex:​)</a></li><li class="function"><a href="#dexcalculationservice.removeliquiditytokenreceived(liquidityburned:totalliquidity:tokenpool:slippage:)">remove​Liquidity​Token​Received(liquidity​Burned:​total​Liquidity:​token​Pool:​slippage:​)</a></li><li class="function"><a href="#dexcalculationservice.removeliquidityxtzreceived(liquidityburned:totalliquidity:xtzpool:slippage:dex:)">remove​Liquidity​Xtz​Received(liquidity​Burned:​total​Liquidity:​xtz​Pool:​slippage:​dex:​)</a></li><li class="function"><a href="#dexcalculationservice.estimateliquiditybakingapy(xtzpool:)">estimate​Liquidity​Baking​APY(xtz​Pool:​)</a></li></ul></li></ol>
        </div>
    </nav>

    <main>
        <article>
            <h1>
    <small>Class</small>
    <code class="name">Dex​Calculation​Service</code>
</h1>

<div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">class</span> <span class="type">DexCalculationService</span>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Wrapper around the kukai-dex-calculations JS library for performing calculations: https://github.com/kukai-wallet/kukai-dex-calculations</p>

</div>

    <section id="properties">
        <h2>Properties</h2>

        <div role="article" class="variable" id="dexcalculationservice.shared">
    <h3>
        <code><a href="#dexcalculationservice.shared">shared</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> <span class="variable">shared</span>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Public shared instace to avoid having multiple copies of the underlying <code>JSContext</code> created</p>

</div>
</div>
    </section>
    <section id="methods">
        <h2>Methods</h2>

        <div role="article" class="function" id="dexcalculationservice.calculatextztotoken(xtztosell:xtzpool:tokenpool:maxslippage:dex:)">
    <h3>
        <code><a href="#dexcalculationservice.calculatextztotoken(xtztosell:xtzpool:tokenpool:maxslippage:dex:)">calculate​Xtz​ToToken(xtz​ToSell:​xtz​Pool:​token​Pool:​max​Slippage:​dex:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">calculateXtzToToken</span>(<span class="variable">xtzToSell</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">xtzPool</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">tokenPool</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">maxSlippage</span>: <span class="type">Double</span>, <span class="variable">dex</span>: <a href="https://kukai-core-swift.kukai.app/DipDupExchangeName"><span class="type">DipDupExchangeName</span></a>) -&gt; <a href="https://kukai-core-swift.kukai.app/DexSwapCalculationResult"><span class="type">DexSwapCalculationResult</span></a>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>A helper function to create all the necessary calculations for a xtzToToken exchange, to perform the operation and display the info to the user in a confirmation screen.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>xtz​ToSell</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The <code>XTZAmount</code> to sell.</p>
</td>
</tr>
<tr>
    <th>xtz​Pool</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The <code>XTZAmount</code> representing the current pool of XTZ that the dex contract holds. Can be fetched with xxxxx.</p>
</td>
</tr>
<tr>
    <th>token​Pool</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The <code>TokenAmount</code> representing the current pool of the given <code>Token</code> that the dex contract holds. Must have the same number of decimalPlaces as the token it represents. Can be fetched with xxxxx.</p>
</td>
</tr>
<tr>
    <th>max​Slippage</th>
    <td><code class="type">Double</code></td>
    <td><p>Percentage (must be between 0 and 1) of maximum amount of slippage the user is willing to accept</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p><code>DexSwapCalculationResult</code> containing the results of all the necessary calculations.</p>

</div>
<div role="article" class="function" id="dexcalculationservice.calculatetokentoxtz(tokentosell:xtzpool:tokenpool:maxslippage:dex:)">
    <h3>
        <code><a href="#dexcalculationservice.calculatetokentoxtz(tokentosell:xtzpool:tokenpool:maxslippage:dex:)">calculate​Token​ToXTZ(token​ToSell:​xtz​Pool:​token​Pool:​max​Slippage:​dex:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">calculateTokenToXTZ</span>(<span class="variable">tokenToSell</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">xtzPool</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">tokenPool</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">maxSlippage</span>: <span class="type">Double</span>, <span class="variable">dex</span>: <a href="https://kukai-core-swift.kukai.app/DipDupExchangeName"><span class="type">DipDupExchangeName</span></a>) -&gt; <a href="https://kukai-core-swift.kukai.app/DexSwapCalculationResult"><span class="type">DexSwapCalculationResult</span></a>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>A helper function to create all the necessary calculations for a tokenToXtz exchange, to perform the operation and display the info to the user in a confirmation screen.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>token​ToSell</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The <code>TokenAmount</code> to sell.</p>
</td>
</tr>
<tr>
    <th>xtz​Pool</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The <code>XTZAmount</code> representing the current pool of XTZ that the dex contract holds. Can be fetched with xxxxx.</p>
</td>
</tr>
<tr>
    <th>token​Pool</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The <code>TokenAmount</code> representing the current pool of the given <code>Token</code> that the dex contract holds. Must have the same number of decimalPlaces as the token it represents. Can be fetched with xxxxx.</p>
</td>
</tr>
<tr>
    <th>max​Slippage</th>
    <td><code class="type">Double</code></td>
    <td><p>Percentage (must be between 0 and 1) of maximum amount of slippage the user is willing to accept</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p><code>DexSwapCalculationResult</code> containing the results of all the necessary calculations.</p>

</div>
<div role="article" class="function" id="dexcalculationservice.calculateaddliquidity(xtz:xtzpool:tokenpool:totalliquidity:maxslippage:dex:)">
    <h3>
        <code><a href="#dexcalculationservice.calculateaddliquidity(xtz:xtzpool:tokenpool:totalliquidity:maxslippage:dex:)">calculate​Add​Liquidity(xtz:​xtz​Pool:​token​Pool:​total​Liquidity:​max​Slippage:​dex:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">calculateAddLiquidity</span>(<span class="variable">xtz</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">xtzPool</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">tokenPool</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">totalLiquidity</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">maxSlippage</span>: <span class="type">Double</span>, <span class="variable">dex</span>: <a href="https://kukai-core-swift.kukai.app/DipDupExchangeName"><span class="type">DipDupExchangeName</span></a>) -&gt; <a href="https://kukai-core-swift.kukai.app/DexAddCalculationResult"><span class="type">DexAddCalculationResult</span></a>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>A helper function to create all the necessary calculations for adding liquidity, with an XTZ input</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>xtz</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The amount of XTZ to deposit</p>
</td>
</tr>
<tr>
    <th>xtz​Pool</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The total XTZ held in the dex contract</p>
</td>
</tr>
<tr>
    <th>token​Pool</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The total token held in the dex contract</p>
</td>
</tr>
<tr>
    <th>total​Liquidity</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The ttotal liquidity held in the liquidity contract</p>
</td>
</tr>
<tr>
    <th>max​Slippage</th>
    <td><code class="type">Double</code></td>
    <td><p>Percentage (must be between 0 and 1) of maximum amount of slippage the user is willing to accept</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p><code>(tokenRequired: TokenAmount, liquidity: TokenAmount)</code> containing the results of all the necessary calculations.</p>

</div>
<div role="article" class="function" id="dexcalculationservice.calculateaddliquidity(token:xtzpool:tokenpool:totalliquidity:maxslippage:dex:)">
    <h3>
        <code><a href="#dexcalculationservice.calculateaddliquidity(token:xtzpool:tokenpool:totalliquidity:maxslippage:dex:)">calculate​Add​Liquidity(token:​xtz​Pool:​token​Pool:​total​Liquidity:​max​Slippage:​dex:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">calculateAddLiquidity</span>(<span class="variable">token</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">xtzPool</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">tokenPool</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">totalLiquidity</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">maxSlippage</span>: <span class="type">Double</span>, <span class="variable">dex</span>: <a href="https://kukai-core-swift.kukai.app/DipDupExchangeName"><span class="type">DipDupExchangeName</span></a>) -&gt; <a href="https://kukai-core-swift.kukai.app/DexAddCalculationResult"><span class="type">DexAddCalculationResult</span></a>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>A helper function to create all the necessary calculations for adding liquidity, with an Token input</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>token</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The amount of Token to deposit</p>
</td>
</tr>
<tr>
    <th>xtz​Pool</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The total XTZ held in the dex contract</p>
</td>
</tr>
<tr>
    <th>token​Pool</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The total token held in the dex contract</p>
</td>
</tr>
<tr>
    <th>total​Liquidity</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The ttotal liquidity held in the liquidity contract</p>
</td>
</tr>
<tr>
    <th>max​Slippage</th>
    <td><code class="type">Double</code></td>
    <td><p>Percentage (must be between 0 and 1) of maximum amount of slippage the user is willing to accept</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p><code>(xtzRequired: XTZAmount, liquidity: TokenAmount)</code> containing the results of all the necessary calculations.</p>

</div>
<div role="article" class="function" id="dexcalculationservice.calculateremoveliquidity(liquidityburned:totalliquidity:xtzpool:tokenpool:maxslippage:dex:)">
    <h3>
        <code><a href="#dexcalculationservice.calculateremoveliquidity(liquidityburned:totalliquidity:xtzpool:tokenpool:maxslippage:dex:)">calculate​Remove​Liquidity(liquidity​Burned:​total​Liquidity:​xtz​Pool:​token​Pool:​max​Slippage:​dex:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">calculateRemoveLiquidity</span>(<span class="variable">liquidityBurned</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">totalLiquidity</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">xtzPool</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">tokenPool</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">maxSlippage</span>: <span class="type">Double</span>, <span class="variable">dex</span>: <a href="https://kukai-core-swift.kukai.app/DipDupExchangeName"><span class="type">DipDupExchangeName</span></a>) -&gt; <a href="https://kukai-core-swift.kukai.app/DexRemoveCalculationResult"><span class="type">DexRemoveCalculationResult</span></a>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>A helper function to create all the necessary calculations for removing liquidity, to return everything the user will get out</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>liquidity​Burned</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The amount of Liquidity tokens the user wants to burn or sell</p>
</td>
</tr>
<tr>
    <th>total​Liquidity</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The total volume of liquidity held in the contract</p>
</td>
</tr>
<tr>
    <th>xtz​Pool</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The xtz pool held in the dex contract</p>
</td>
</tr>
<tr>
    <th>token​Pool</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The token pool held in the dex contract</p>
</td>
</tr>
<tr>
    <th>max​Slippage</th>
    <td><code class="type">Double</code></td>
    <td><p>Percentage (must be between 0 and 1) of maximum amount of slippage the user is willing to accept</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p><code>(xtz: XTZAmount, token: TokenAmount)</code> containing the results of all the necessary calculations.</p>

</div>
<div role="article" class="function" id="dexcalculationservice.settings(fordex:)">
    <h3>
        <code><a href="#dexcalculationservice.settings(fordex:)">settings(for​Dex:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">settings</span>(<span class="variable">forDex</span> <span class="variable">dex</span>: <a href="https://kukai-core-swift.kukai.app/DipDupExchangeName"><span class="type">DipDupExchangeName</span></a>) -&gt; (<span class="variable">fee</span>: <span class="type">Double</span>, <span class="variable">burn</span>: <span class="type">Double</span>, <span class="variable">includeSubsidy</span>: <span class="type">Bool</span>)  </body></html></code></pre>
</div>
</div>
<div role="article" class="function" id="dexcalculationservice.xtztotokenexpectedreturn(xtztosell:xtzpool:tokenpool:dex:)">
    <h3>
        <code><a href="#dexcalculationservice.xtztotokenexpectedreturn(xtztosell:xtzpool:tokenpool:dex:)">xtz​ToToken​Expected​Return(xtz​ToSell:​xtz​Pool:​token​Pool:​dex:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">xtzToTokenExpectedReturn</span>(<span class="variable">xtzToSell</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">xtzPool</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">tokenPool</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">dex</span>: <a href="https://kukai-core-swift.kukai.app/DipDupExchangeName"><span class="type">DipDupExchangeName</span></a>) -&gt; <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>The <code>TokenAmount</code> expected to be returned for the supplied <code>XTZAmount</code>, given the dex contract xtzPool and tokenPool.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>xtz​ToSell</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The <code>XTZAmount</code> to sell.</p>
</td>
</tr>
<tr>
    <th>xtz​Pool</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The <code>XTZAmount</code> representing the current pool of XTZ that the dex holds. Can be fetched with xxxxx.</p>
</td>
</tr>
<tr>
    <th>token​Pool</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The <code>TokenAmount</code> representing the current pool of the given <code>Token</code> that the dex holds. Must have the same number of decimalPlaces as the token it represents. Can be fetched with xxxxx.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p><code>TokenAmount</code> containing the amount the user can expect in return for their XTZ</p>

</div>
<div role="article" class="function" id="dexcalculationservice.xtztotokenminimumreturn(tokenamount:slippage:)">
    <h3>
        <code><a href="#dexcalculationservice.xtztotokenminimumreturn(tokenamount:slippage:)">xtz​ToToken​Minimum​Return(token​Amount:​slippage:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">xtzToTokenMinimumReturn</span>(<span class="variable">tokenAmount</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">slippage</span>: <span class="type">Double</span>) -&gt; <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>The minimum possible <code>TokenAmount</code> returned, taking into account slippage.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>token​Amount</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The <code>TokenAmount</code> returned from <code>xtzToTokenExpectedReturn()</code>.</p>
</td>
</tr>
<tr>
    <th>slippage</th>
    <td><code class="type">Double</code></td>
    <td><p>A double value between 0 and 1, indicating the maximum percentage of slippage a user will accept.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p><code>TokenAmount</code> containing the minimum amount the user can expect in return for their XTZ</p>

</div>
<div role="article" class="function" id="dexcalculationservice.xtztotokenrequiredxtzfor(tokenamount:xtzpool:tokenpool:dex:)">
    <h3>
        <code><a href="#dexcalculationservice.xtztotokenrequiredxtzfor(tokenamount:xtzpool:tokenpool:dex:)">xtz​ToToken​Required​Xtz​For(token​Amount:​xtz​Pool:​token​Pool:​dex:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">xtzToTokenRequiredXtzFor</span>(<span class="variable">tokenAmount</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">xtzPool</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">tokenPool</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">dex</span>: <a href="https://kukai-core-swift.kukai.app/DipDupExchangeName"><span class="type">DipDupExchangeName</span></a>) -&gt; <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Calculate the <code>XTZAmount</code> required in order to receive the supplied <code>TokenAmount</code>.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>token​Amount</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The <code>TokenAmount</code> the user wants to receive.</p>
</td>
</tr>
<tr>
    <th>xtz​Pool</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The <code>XTZAmount</code> representing the current pool of XTZ that the dex holds. Can be fetched with xxxxx.</p>
</td>
</tr>
<tr>
    <th>token​Pool</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The <code>TokenAmount</code> representing the current pool of the given <code>Token</code> that the dex holds. Must have the same number of decimalPlaces as the token it represents. Can be fetched with xxxxx.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p><code>XTZAmount</code> containing the amount of XTZ required in order to recieve the amount of token.</p>

</div>
<div role="article" class="function" id="dexcalculationservice.xtztotokenexchangerate(xtztosell:xtzpool:tokenpool:dex:)">
    <h3>
        <code><a href="#dexcalculationservice.xtztotokenexchangerate(xtztosell:xtzpool:tokenpool:dex:)">xtz​ToToken​Exchange​Rate(xtz​ToSell:​xtz​Pool:​token​Pool:​dex:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">xtzToTokenExchangeRate</span>(<span class="variable">xtzToSell</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">xtzPool</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">tokenPool</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">dex</span>: <a href="https://kukai-core-swift.kukai.app/DipDupExchangeName"><span class="type">DipDupExchangeName</span></a>) -&gt; <span class="type">Decimal</span>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>The exchange rate for a given trade, taking into account slippage and fees</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>xtz​ToSell</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The <code>XTZAmount</code> to sell.</p>
</td>
</tr>
<tr>
    <th>xtz​Pool</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The <code>XTZAmount</code> representing the current pool of XTZ that the dex holds. Can be fetched with xxxxx.</p>
</td>
</tr>
<tr>
    <th>token​Pool</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The <code>TokenAmount</code> representing the current pool of the given <code>Token</code> that the dex holds. Must have the same number of decimalPlaces as the token it represents. Can be fetched with xxxxx.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p><code>Decimal</code> containing the exchange rate from 1 XTZ to the requested <code>Token</code></p>

</div>
<div role="article" class="function" id="dexcalculationservice.xtztotokenexchangeratedisplay(xtztosell:xtzpool:tokenpool:dex:)">
    <h3>
        <code><a href="#dexcalculationservice.xtztotokenexchangeratedisplay(xtztosell:xtzpool:tokenpool:dex:)">xtz​ToToken​Exchange​Rate​Display(xtz​ToSell:​xtz​Pool:​token​Pool:​dex:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">xtzToTokenExchangeRateDisplay</span>(<span class="variable">xtzToSell</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">xtzPool</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">tokenPool</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">dex</span>: <a href="https://kukai-core-swift.kukai.app/DipDupExchangeName"><span class="type">DipDupExchangeName</span></a>) -&gt; <span class="type">Decimal</span>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>The exchange rate for a given trade, taking into account slippage and fees, formatted and truncated for easier display in the UI.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>xtz​ToSell</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The <code>XTZAmount</code> to sell.</p>
</td>
</tr>
<tr>
    <th>xtz​Pool</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The <code>XTZAmount</code> representing the current pool of XTZ that the dex holds. Can be fetched with xxxxx.</p>
</td>
</tr>
<tr>
    <th>token​Pool</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The <code>TokenAmount</code> representing the current pool of the given <code>Token</code> that the dex holds. Must have the same number of decimalPlaces as the token it represents. Can be fetched with xxxxx.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p><code>Decimal</code> containing the exchange rate from 1 XTZ to the requested <code>Token</code></p>

</div>
<div role="article" class="function" id="dexcalculationservice.xtztotokenmarketrate(xtzpool:tokenpool:)">
    <h3>
        <code><a href="#dexcalculationservice.xtztotokenmarketrate(xtzpool:tokenpool:)">xtz​ToToken​Market​Rate(xtz​Pool:​token​Pool:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">xtzToTokenMarketRate</span>(<span class="variable">xtzPool</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">tokenPool</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>) -&gt; <span class="type">Decimal</span>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Before a user has entered in an amount to trade, its useful to show them the base exchange rate, ignoring slippage.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>xtz​Pool</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The <code>XTZAmount</code> representing the current pool of XTZ that the dex holds. Can be fetched with xxxxx.</p>
</td>
</tr>
<tr>
    <th>token​Pool</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The <code>TokenAmount</code> representing the current pool of the given <code>Token</code> that the dex holds. Must have the same number of decimalPlaces as the token it represents. Can be fetched with xxxxx.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p><code>Decimal</code> containing the exchange rate from 1 XTZ to the requested <code>Token</code></p>

</div>
<div role="article" class="function" id="dexcalculationservice.xtztotokenpriceimpact(xtztosell:xtzpool:tokenpool:dex:)">
    <h3>
        <code><a href="#dexcalculationservice.xtztotokenpriceimpact(xtztosell:xtzpool:tokenpool:dex:)">xtz​ToToken​Price​Impact(xtz​ToSell:​xtz​Pool:​token​Pool:​dex:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">xtzToTokenPriceImpact</span>(<span class="variable">xtzToSell</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">xtzPool</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">tokenPool</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">dex</span>: <a href="https://kukai-core-swift.kukai.app/DipDupExchangeName"><span class="type">DipDupExchangeName</span></a>) -&gt; <span class="type">Decimal</span>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Calcualte the percentage the price impact the given trade would incur. Since this is already taken into account for the other functions, this function returns in the scale of 0 - 100, for display purposes.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>xtz​ToSell</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The <code>XTZAmount</code> to sell.</p>
</td>
</tr>
<tr>
    <th>xtz​Pool</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The <code>XTZAmount</code> representing the current pool of XTZ that the dex holds. Can be fetched with xxxxx.</p>
</td>
</tr>
<tr>
    <th>token​Pool</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The <code>TokenAmount</code> representing the current pool of the given <code>Token</code> that the dex holds. Must have the same number of decimalPlaces as the token it represents. Can be fetched with xxxxx.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p><code>Decimal</code> containing the slippage percentage, 0 - 100.</p>

</div>
<div role="article" class="function" id="dexcalculationservice.tokentoxtzexpectedreturn(tokentosell:xtzpool:tokenpool:dex:)">
    <h3>
        <code><a href="#dexcalculationservice.tokentoxtzexpectedreturn(tokentosell:xtzpool:tokenpool:dex:)">token​ToXtz​Expected​Return(token​ToSell:​xtz​Pool:​token​Pool:​dex:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">tokenToXtzExpectedReturn</span>(<span class="variable">tokenToSell</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">xtzPool</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">tokenPool</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">dex</span>: <a href="https://kukai-core-swift.kukai.app/DipDupExchangeName"><span class="type">DipDupExchangeName</span></a>) -&gt; <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>The <code>XTZAmount</code> expected to be returned for the supplied <code>TokenAmount</code>, given the dex contracts xtzPool and tokenPool.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>token​ToSell</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The <code>TokenAmount</code> to sell.</p>
</td>
</tr>
<tr>
    <th>xtz​Pool</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The <code>XTZAmount</code> representing the current pool of XTZ that the dex holds. Can be fetched with xxxxx.</p>
</td>
</tr>
<tr>
    <th>token​Pool</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The <code>TokenAmount</code> representing the current pool of the given <code>Token</code> that the dex holds. Must have the same number of decimalPlaces as the token it represents. Can be fetched with xxxxx.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p><code>XTZAmount</code> containing the amount the user can expect in return for their <code>Token</code></p>

</div>
<div role="article" class="function" id="dexcalculationservice.tokentoxtzminimumreturn(xtzamount:slippage:)">
    <h3>
        <code><a href="#dexcalculationservice.tokentoxtzminimumreturn(xtzamount:slippage:)">token​ToXtz​Minimum​Return(xtz​Amount:​slippage:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">tokenToXtzMinimumReturn</span>(<span class="variable">xtzAmount</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">slippage</span>: <span class="type">Double</span>) -&gt; <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>The minimum possible <code>XTZAmount</code> returned, taking into account slippage.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>xtz​Amount</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The <code>XTZAmount</code> returned from <code>tokenToXtzExpectedReturn()</code>.</p>
</td>
</tr>
<tr>
    <th>slippage</th>
    <td><code class="type">Double</code></td>
    <td><p>A double value between 0 and 1, indicating the maximum percentage of slippage a user will accept.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p><code>XTZAmount</code> containing the minimum amount the user can expect in return for their Token</p>

</div>
<div role="article" class="function" id="dexcalculationservice.tokentoxtzrequiredtokenfor(xtzamount:xtzpool:tokenpool:dex:)">
    <h3>
        <code><a href="#dexcalculationservice.tokentoxtzrequiredtokenfor(xtzamount:xtzpool:tokenpool:dex:)">token​ToXtz​Required​Token​For(xtz​Amount:​xtz​Pool:​token​Pool:​dex:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">tokenToXtzRequiredTokenFor</span>(<span class="variable">xtzAmount</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">xtzPool</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">tokenPool</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">dex</span>: <a href="https://kukai-core-swift.kukai.app/DipDupExchangeName"><span class="type">DipDupExchangeName</span></a>) -&gt; <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Calculate the <code>TokenAmount</code> required in order to receive the supplied <code>XTZAmount</code>.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>xtz​Amount</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The <code>XTZAmount</code> the user wants to receive.</p>
</td>
</tr>
<tr>
    <th>xtz​Pool</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The <code>XTZAmount</code> representing the current pool of XTZ that the dex holds. Can be fetched with xxxxx.</p>
</td>
</tr>
<tr>
    <th>token​Pool</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The <code>TokenAmount</code> representing the current pool of the given <code>Token</code> that the dex holds. Must have the same number of decimalPlaces as the token it represents. Can be fetched with xxxxx.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p><code>TokenAmount</code> containing the amount of <code>Token</code> required in order to recieve the amount of XTZ.</p>

</div>
<div role="article" class="function" id="dexcalculationservice.tokentoxtzexchangerate(tokentosell:xtzpool:tokenpool:dex:)">
    <h3>
        <code><a href="#dexcalculationservice.tokentoxtzexchangerate(tokentosell:xtzpool:tokenpool:dex:)">token​ToXtz​Exchange​Rate(token​ToSell:​xtz​Pool:​token​Pool:​dex:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">tokenToXtzExchangeRate</span>(<span class="variable">tokenToSell</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">xtzPool</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">tokenPool</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">dex</span>: <a href="https://kukai-core-swift.kukai.app/DipDupExchangeName"><span class="type">DipDupExchangeName</span></a>) -&gt; <span class="type">Decimal</span>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>The exchange rate for a given trade, taking into account slippage and fees</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>token​ToSell</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The <code>TokenAmount</code> to sell.</p>
</td>
</tr>
<tr>
    <th>xtz​Pool</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The <code>XTZAmount</code> representing the current pool of XTZ that the dex holds. Can be fetched with xxxxx.</p>
</td>
</tr>
<tr>
    <th>token​Pool</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The <code>TokenAmount</code> representing the current pool of the given <code>Token</code> that the dex holds. Must have the same number of decimalPlaces as the token it represents. Can be fetched with xxxxx.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p><code>Decimal</code> containing the exchange rate from 1 of the given <code>Token</code> to XTZ</p>

</div>
<div role="article" class="function" id="dexcalculationservice.tokentoxtzexchangeratedisplay(tokentosell:xtzpool:tokenpool:dex:)">
    <h3>
        <code><a href="#dexcalculationservice.tokentoxtzexchangeratedisplay(tokentosell:xtzpool:tokenpool:dex:)">token​ToXtz​Exchange​Rate​Display(token​ToSell:​xtz​Pool:​token​Pool:​dex:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">tokenToXtzExchangeRateDisplay</span>(<span class="variable">tokenToSell</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">xtzPool</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">tokenPool</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">dex</span>: <a href="https://kukai-core-swift.kukai.app/DipDupExchangeName"><span class="type">DipDupExchangeName</span></a>) -&gt; <span class="type">Decimal</span>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>The exchange rate for a given trade, taking into account slippage and fees, formatted and truncated for easier display in the UI.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>token​ToSell</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The <code>TokenAmount</code> to sell.</p>
</td>
</tr>
<tr>
    <th>xtz​Pool</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The <code>XTZAmount</code> representing the current pool of XTZ that the dex holds. Can be fetched with xxxxx.</p>
</td>
</tr>
<tr>
    <th>token​Pool</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The <code>TokenAmount</code> representing the current pool of the given <code>Token</code> that the dex holds. Must have the same number of decimalPlaces as the token it represents. Can be fetched with xxxxx.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p><code>Decimal</code> containing the exchange rate from 1 of the given <code>Token</code> to XTZ</p>

</div>
<div role="article" class="function" id="dexcalculationservice.tokentoxtzmarketrate(xtzpool:tokenpool:)">
    <h3>
        <code><a href="#dexcalculationservice.tokentoxtzmarketrate(xtzpool:tokenpool:)">token​ToXtz​Market​Rate(xtz​Pool:​token​Pool:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">tokenToXtzMarketRate</span>(<span class="variable">xtzPool</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">tokenPool</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>) -&gt; <span class="type">Decimal</span>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Before a user has entered in an amount to trade, its useful to show them the base exchange rate, ignoring slippage.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>xtz​Pool</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The <code>XTZAmount</code> representing the current pool of XTZ that the dex holds. Can be fetched with xxxxx.</p>
</td>
</tr>
<tr>
    <th>token​Pool</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The <code>TokenAmount</code> representing the current pool of the given <code>Token</code> that the dex holds. Must have the same number of decimalPlaces as the token it represents. Can be fetched with xxxxx.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p><code>Decimal</code> containing the exchange rate from 1 of the given <code>Token</code> to XTZ</p>

</div>
<div role="article" class="function" id="dexcalculationservice.tokentoxtzpriceimpact(tokentosell:xtzpool:tokenpool:dex:)">
    <h3>
        <code><a href="#dexcalculationservice.tokentoxtzpriceimpact(tokentosell:xtzpool:tokenpool:dex:)">token​ToXtz​Price​Impact(token​ToSell:​xtz​Pool:​token​Pool:​dex:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">tokenToXtzPriceImpact</span>(<span class="variable">tokenToSell</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">xtzPool</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">tokenPool</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">dex</span>: <a href="https://kukai-core-swift.kukai.app/DipDupExchangeName"><span class="type">DipDupExchangeName</span></a>) -&gt; <span class="type">Decimal</span>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Calcualte the percentage slippage the given trade would incur. Since this is already taken into account for the other functions, this function returns in the scale of 0 - 100, for display purposes.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>token​ToSell</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The <code>TokenAmount</code> to sell.</p>
</td>
</tr>
<tr>
    <th>xtz​Pool</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The <code>XTZAmount</code> representing the current pool of XTZ that the dex holds. Can be fetched with xxxxx.</p>
</td>
</tr>
<tr>
    <th>token​Pool</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The <code>TokenAmount</code> representing the current pool of the given <code>Token</code> that the dex holds. Must have the same number of decimalPlaces as the token it represents. Can be fetched with xxxxx.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p><code>Decimal</code> containing the slippage percentage, 0 - 100.</p>

</div>
<div role="article" class="function" id="dexcalculationservice.addliquidityreturn(xtztodeposit:xtzpool:totalliquidity:slippage:dex:)">
    <h3>
        <code><a href="#dexcalculationservice.addliquidityreturn(xtztodeposit:xtzpool:totalliquidity:slippage:dex:)">add​Liquidity​Return(xtz​ToDeposit:​xtz​Pool:​total​Liquidity:​slippage:​dex:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">addLiquidityReturn</span>(<span class="variable">xtzToDeposit</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">xtzPool</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">totalLiquidity</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">slippage</span>: <span class="type">Double</span>, <span class="variable">dex</span>: <a href="https://kukai-core-swift.kukai.app/DipDupExchangeName"><span class="type">DipDupExchangeName</span></a>) -&gt; (<span class="variable">expected</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">minimum</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>)?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Calculate the amount of liquidity tokens a user can expect back for an amount of XTZ and Token</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>xtz​ToDeposit</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The XTZ to send to the dex contract</p>
</td>
</tr>
<tr>
    <th>token​ToDeposit</th>
    <td></td>
    <td><p>The Token to send to the dex contract</p>
</td>
</tr>
<tr>
    <th>total​Liquidity</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The total liquidity already in the contract</p>
</td>
</tr>
<tr>
    <th>slippage</th>
    <td><code class="type">Double</code></td>
    <td><p>Percentage (must be between 0 and 1) of maximum amount of slippage the user is willing to accept</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p><code>TokenAmount</code> an amount of Liquidity token you will receive</p>

</div>
<div role="article" class="function" id="dexcalculationservice.addliquiditytokenrequired(xtztodeposit:xtzpool:tokenpool:dex:)">
    <h3>
        <code><a href="#dexcalculationservice.addliquiditytokenrequired(xtztodeposit:xtzpool:tokenpool:dex:)">add​Liquidity​Token​Required(xtz​ToDeposit:​xtz​Pool:​token​Pool:​dex:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">addLiquidityTokenRequired</span>(<span class="variable">xtzToDeposit</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">xtzPool</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">tokenPool</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">dex</span>: <a href="https://kukai-core-swift.kukai.app/DipDupExchangeName"><span class="type">DipDupExchangeName</span></a>) -&gt; <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Calculate the amount of Token that is required to send along side your XTZ</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>xtz​ToDeposit</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The amount of XTZ to send</p>
</td>
</tr>
<tr>
    <th>xtz​Pool</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The XTZ currently held in the dex contract</p>
</td>
</tr>
<tr>
    <th>token​Pool</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The Token currently held in the dex contract</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p><code>TokenAmount</code> The amount of token required to send with the given amount of XTZ</p>

</div>
<div role="article" class="function" id="dexcalculationservice.addliquidityxtzrequired(tokentodeposit:xtzpool:tokenpool:dex:)">
    <h3>
        <code><a href="#dexcalculationservice.addliquidityxtzrequired(tokentodeposit:xtzpool:tokenpool:dex:)">add​Liquidity​Xtz​Required(token​ToDeposit:​xtz​Pool:​token​Pool:​dex:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">addLiquidityXtzRequired</span>(<span class="variable">tokenToDeposit</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">xtzPool</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">tokenPool</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">dex</span>: <a href="https://kukai-core-swift.kukai.app/DipDupExchangeName"><span class="type">DipDupExchangeName</span></a>) -&gt; <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Calculate the amount of XTZ that is required to send along side your Token</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>token​ToDeposit</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The amount of Token to send</p>
</td>
</tr>
<tr>
    <th>xtz​Pool</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The XTZ currently held in the dex contract</p>
</td>
</tr>
<tr>
    <th>token​Pool</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The Token currently held in the dex contract</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p><code>XTZAmount</code> The amount of XTZ required to send with the given amount of Token</p>

</div>
<div role="article" class="function" id="dexcalculationservice.removeliquiditytokenreceived(liquidityburned:totalliquidity:tokenpool:slippage:)">
    <h3>
        <code><a href="#dexcalculationservice.removeliquiditytokenreceived(liquidityburned:totalliquidity:tokenpool:slippage:)">remove​Liquidity​Token​Received(liquidity​Burned:​total​Liquidity:​token​Pool:​slippage:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">removeLiquidityTokenReceived</span>(<span class="variable">liquidityBurned</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">totalLiquidity</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">tokenPool</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">slippage</span>: <span class="type">Double</span>) -&gt; (<span class="variable">expected</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">minimum</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>)?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Calculate the amount of token a user would revice back if they burned X liquidity</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>liquidity​Burned</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The amount of liquidity to burn</p>
</td>
</tr>
<tr>
    <th>total​Liquidity</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The totla liquidity held in the dex contract</p>
</td>
</tr>
<tr>
    <th>token​Pool</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The total token held in the dex contract</p>
</td>
</tr>
<tr>
    <th>slippage</th>
    <td><code class="type">Double</code></td>
    <td><p>Percentage (must be between 0 and 1) of maximum amount of slippage the user is willing to accept</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p><code>TokenAmount</code> The amount of Token that would be returned</p>

</div>
<div role="article" class="function" id="dexcalculationservice.removeliquidityxtzreceived(liquidityburned:totalliquidity:xtzpool:slippage:dex:)">
    <h3>
        <code><a href="#dexcalculationservice.removeliquidityxtzreceived(liquidityburned:totalliquidity:xtzpool:slippage:dex:)">remove​Liquidity​Xtz​Received(liquidity​Burned:​total​Liquidity:​xtz​Pool:​slippage:​dex:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">removeLiquidityXtzReceived</span>(<span class="variable">liquidityBurned</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">totalLiquidity</span>: <a href="https://kukai-core-swift.kukai.app/TokenAmount"><span class="type">TokenAmount</span></a>, <span class="variable">xtzPool</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">slippage</span>: <span class="type">Double</span>, <span class="variable">dex</span>: <a href="https://kukai-core-swift.kukai.app/DipDupExchangeName"><span class="type">DipDupExchangeName</span></a>) -&gt; (<span class="variable">expected</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>, <span class="variable">minimum</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>)?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Calculate the amount of XTZ a user would revice back if they burned X liquidity</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>liquidity​Burned</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The amount of liquidity to burn</p>
</td>
</tr>
<tr>
    <th>total​Liquidity</th>
    <td><code class="type">Token​Amount</code></td>
    <td><p>The totla liquidity held in the dex contract</p>
</td>
</tr>
<tr>
    <th>xtz​Pool</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The total XTZ held in the dex contract</p>
</td>
</tr>
<tr>
    <th>slippage</th>
    <td><code class="type">Double</code></td>
    <td><p>Percentage (must be between 0 and 1) of maximum amount of slippage the user is willing to accept</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p><code>XTZAmount</code> The amount of XTZ that would be returned</p>

</div>
<div role="article" class="function" id="dexcalculationservice.estimateliquiditybakingapy(xtzpool:)">
    <h3>
        <code><a href="#dexcalculationservice.estimateliquiditybakingapy(xtzpool:)">estimate​Liquidity​Baking​APY(xtz​Pool:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">estimateLiquidityBakingAPY</span>(<span class="variable">xtzPool</span>: <a href="https://kukai-core-swift.kukai.app/XTZAmount"><span class="type">XTZAmount</span></a>) -&gt; <span class="type">Decimal</span>?  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Estimate the APY of liquidity baking contract, as it has a known income.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>xtz​Pool</th>
    <td><code class="type">XTZAmount</code></td>
    <td><p>The total XTZ held in the dex contract</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p><code>Decimal</code> The estimated percentage APY</p>

</div>
    </section>



        </article>
    </main>

    <footer>
        <p>
    Generated on <time datetime="2023-09-25T14:49:08+0000">September 25, 2023</time> using <a href="https://github.com/SwiftDocOrg/swift-doc">swift-doc</a> <span class="version">1.0.0-rc.1</span>.
</p>
    </footer>
</body>
</html>
